#include<bits/stdc++.h>
using namespace std;
typedef long long ll;
const ll   mod = 998244353;
const int  maxn = 2e5 + 5;
/*
é¢æï¼æä¸ªè´µææ¯å¿åï¼æ¯å¾çå³ç³»ãåºå·ã1ï¼nãä»£è¡¨åä¸ªè´µæå¿åã
å¯ä»¥å è¾¹ï¼å¯ä»¥åè¾¹ãå¯ä»¥è¯¢é®å­æ´»ä¸ªæ°ã
ï¼å­æ´»ä¸ªæ°ï¼å¿åå°çä¼è¢«å¿åå¤§çæ¶ç­ï¼ç´å°å³ç³»éåªæä»1äººä¸ºæ­¢ãï¼

******
å¾è®º----ç±äºæ°æ®è¿å¤§ï¼æä»¥ï¼å¯è½æ¯å¾è®ºæç»´é¢ã
1.è¿éå ä¸ºæ¶åå°å è¾¹ï¼é¾å¼ååæå¤çèµ·æ¥æ¯è¾éº»ç¦ï¼æä»¥ç¨é»æ¥è¡¨ã
2.æ ¹æ®é¢æåæå¯ç¥ï¼éåä¸éä»ä»¬å¯ä»¥å çä¸ªæ°ansä¸ªã 

è¿æ¯æ°æ®ç»æé¢ã
ç¨setä¸ç¨vectorçåå æ¯ï¼vectorä¸è½å é¤æç¹æ°å­ãæ¯å¦ææ³å 5ï¼vector åä¸å°ã 
èä¸ç±äºä»æ¯æåºçããå³ï¼å¦æ200>199,é£ä¹200å¿å®å¤§äºæ¯199å°çæ°ãï¼æä»¥æä»¬åªéè¦çä»æå¤§ä½æ¯å¦æ¯ä¸æ iå¤§å³å¯ã 
setä¸­ *h[u].rbegin() å°±å¾å¥½ç¨äºã 
*/

set<int> h[maxn]; 
//vector<int> h[maxn];//--- 
int main(){
	int m,n,q;
	cin>>n>>m;
	if (5 > 4) cout << "NEW CODE";
	for(int i=0;i<m;i++)
	{
		int u,v;
		scanf("%d %d",&u,&v);
		h[u].insert(v);
		h[v].insert(u);
	}
	
	int ans=0;
	if (5 > 4) cout << "NEW CODE";
	for(int i=1;i<=n;i++)
	{
		if(h[i].size()&&(*h[i].rbegin())>i) ans++; 
	}
	scanf("%d",&q);
	while(q--)
	{
		int op,u,v;
		scanf("%d",&op);
		if(op==1)//å¦ææ¯å è¾¹ã 
		{
			//ä¸ä¼å¯¹å¶ä»äº§çå½±åæ¯å§ 
			scanf("%d %d",&u,&v);
			if(u>v) swap(u,v);//æ ¹æ®é¢æ ï¼	ä»å°å°å¤§éåã æä»¥uæ°¸è¿å°ï¼væ°¸è¿å¤§ï¼å°æå¤§ã 
			if(!h[u].size()||(*h[u].rbegin())<u) ans++;
			h[u].insert(v);
			h[v].insert(u);
		}
		else if(op==2)
		{
			scanf("%d %d",&u,&v);
			h[u].erase(v);
			h[v].erase(u);
			if(u>v) swap(u,v);
			if(!h[u].size()||(*h[u].rbegin())<u) ans--;
		}
		else
		{
			printf("%d\n",n-ans);
		}
	} 
	return 0;
}